<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Public goods | Willard Robinson</title>

<script src="site_libs/header-attrs-2.28/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />
<!-- Google Tag Manager -->
<script>(function (w, d, s, l, i) {
        w[l] = w[l] || []; w[l].push({
            'gtm.start':
                new Date().getTime(), event: 'gtm.js'
        }); var f = d.getElementsByTagName(s)[0],
            j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-5B8VD5SK');
</script>
<!-- End Google Tag Manager -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PMMY7LYYMC"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-PMMY7LYYMC');
</script>

<!-- Metadata -->
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Willard Robinson's personal website",
    "url": "https://wmrobin.github.io/"
}
</script>

<meta charset="UTF-8">
<meta name="description"
    content="Will Robinson is a fourth year Ph.D. student in the Economics department at North Carolina State University (NCSU).">
<meta name="keywords" content="North Carolina State University, Environmental Economics, cap and trade, national parks">
<meta name="author" content="Willard Robinson">


<link rel="shortcut icon" href="images/icons/circle-user-solid.svg">
<link rel="icon" href="imagees/icons/circle-user-solid.svg">

<title>{{ pagetitle }}</title>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>






<link rel="stylesheet" href="style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Willard Robinson</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-mountain-sun"></span>
     
    Home
  </a>
</li>
<li>
  <a href="research.html">
    <span class="fa fa-pen"></span>
     
    Research
  </a>
</li>
<li>
  <a href="cv.html">
    <span class="fa fa-file"></span>
     
    CV
  </a>
</li>
<li>
  <a href="teaching.html">
    <span class="fa fa-book-open-reader"></span>
     
    Teaching
  </a>
</li>
<li>
  <a href="public-goods.html">
    <span class="fa fa-code"></span>
     
    Public goods
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:wmrobin3@ncsu.edu">
    <span class="fa fa-solid fa-envelope"></span>
     
  </a>
</li>
<li>
  <a href="https://twitter.com/WMRobinEcon">
    <span class="fa fa-brands fa-x-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/WMRobin">
    <span class="fa fa-brands fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">




</div>


<p>On this page, I have listed some “public goods” that I’ve made. The
idea is that these are useful/interesting to me, and they may be
useful/interesting to you, too!</p>
<div id="serial-dictator-program" class="section level2">
<h2>Serial dictator program</h2>
<style>
table {
  table-layout: auto;
  width: auto;
  border-collapse: collapse;
}
th, td {
  border: 1px solid black;
  padding: 8px;
}
</style>
<p>I wrote this program to help with assigning papers to reviewers for a
peer review group I helped start.</p>
<p>The program is written in the wonderful
<a href="https://julialang.org/" target="_blank">Julia</a> language, but
I will happily translate it to other languages (most easily in R or
Stata) if there is a demand!</p>
<p>The
<a href="https://people.duke.edu/~aa88/articles/rsrcECMA.pdf" target="_blank">serial
dictator</a> mechanism is used to fairly assign each reviewer a paper to
review. The reviewers are given a list of papers, and they submit a rank
ordered list. These lists are then fed into the mechanism and a fair
allocation is output!</p>
<div id="how-the-serial-dictator-works-an-example"
class="section level3">
<h3>How the serial dictator works: an example</h3>
<p>To illustrate, assume there are three papers to be assigned <span
class="math inline">\(\{a,b,c\}\)</span> and three potential reviewers
<span class="math inline">\(\{1,2,3\}\)</span>. Reviewer <span
class="math inline">\(i\)</span>’s preferences are denoted by <span
class="math inline">\(P_i\)</span>. For this example, I’ll use the
following preferences:</p>
<p><span class="math display">\[
\begin{array}{ccc}
  P_1 &amp; P_2 &amp; P_3 \\ \hline
  a &amp; a &amp; b \\
  b &amp; c &amp; a \\
  c &amp; b &amp; c
\end{array}
\]</span></p>
<p>To get the best possible allocation, the allocator wants to consider
consider all possible orders of dictatorship. With three potential
reviewers, these are:</p>
<p><span class="math display">\[
\begin{array}{rl}
  \text{order 1}: &amp; 1 \to 2 \to 3 \\
  \text{order 2}: &amp; 1 \to 3 \to 2 \\
  \text{order 3}: &amp; 2 \to 1 \to 3 \\
  \text{order 4}: &amp; 2 \to 3 \to 1 \\
  \text{order 5}: &amp; 3 \to 1 \to 2 \\
  \text{order 6}: &amp; 3 \to 2 \to 1
\end{array}
\]</span></p>
<p>The allocation of dictator order <span
class="math inline">\(k\)</span> for individual <span
class="math inline">\(i\)</span> is denoted <span
class="math inline">\(\mu_k(i)\)</span>.</p>
<p>I’ll illustrate with order 1. The mechanism works according to the
following steps:</p>
<ol start="0" style="list-style-type: decimal">
<li>Define the set of available objects as <span
class="math inline">\(A_1 = \{1,2,3\}\)</span></li>
<li>Person 1 chooses first. All objects are in the available set, so she
gets her most preferred item. So, <span class="math inline">\(\mu_1(1) =
a\)</span>. Update the set of available objects to be <span
class="math inline">\(A_2 = A_1 \setminus \{\mu_1(1)\}\)</span>.</li>
<li>Person 2 chooses her most preferred item from <span
class="math inline">\(A_2\)</span>. Her most preferred item is not
available, so she gets her second-most preferred item. So, <span
class="math inline">\(\mu_1(2) = c\)</span>. Update the set of available
objects to be <span class="math inline">\(A_3 = A_2 \setminus
\{\mu_1(1), \mu_1(2)\}\)</span>.</li>
<li>There is only one item in the available set, so the third person is
assigned that item. So <span class="math inline">\(\mu_1(3) =
b\)</span>. (her most preferred!)</li>
</ol>
<p>The final allocation for dictator order 1 is <span
class="math inline">\(\mu_1 = (a,c,b)\)</span>.</p>
<p>How well off are the people under this allocation? A simple way to
calculate an individual’s welfare is to subtract 4 (the number of
objects + 1) from the ranking of their allocation. We’ll call this the
“payoff” to the individual.</p>
<p>Let <span class="math inline">\(P_i(\mu_1)\)</span> be the ranking of
person <span class="math inline">\(i\)</span>’s allocated object; their
payoff is then <span class="math inline">\(4 - P_i(\mu_1)\)</span>. The
total welfare of the allocation for serial dictator order <span
class="math inline">\(k\)</span> is <span class="math display">\[V_k =
\sum_{i=1}^3 \left(4 - P_i(\mu_k)\right).\]</span> This means order 1
has a payoff of 5.</p>
</div>
<div id="how-you-can-use-this-program" class="section level3">
<h3>How you can use this program</h3>
<p>The program goes through all permutations of dictatorship orders to
find the one that maximizes payoff defined in this way. Note that the
program can handle a larger number of individuals than objects, but it
cannot allocate more objects than there are people. This is mainly
because everybody who submitted a paper for review was required to be a
reviewer, so there was by design always at least as many reviewers as
there were papers.</p>
<p>Another peculiarity about this program is that everybody must rank
every object. In many cases, a person may deem only a small number of
objects better than nothing. Because my peer review group required
everyone participating to review a paper, everybody submitted a complete
ranking.</p>
<p>I find it interesting to see how “popular” the papers were, so the
program saves a histogram table as a CSV. This table is called
<code>rank-counts.csv</code>. The main allocation is saved in
<code>serial-dictator-allocation.csv</code> and can be easily opened in
Excel or Google Sheets.</p>
<p>You will need to provide three parameters at the start of the
program: <code>indir</code>, <code>outdir</code>, and
<code>filename</code>. These are, respectively, the directory containing
your preferences CSV, the directory where you would like the allocation
saved, and the name of the CSV containing your preferences. Update these
parameters and you’re good to go!</p>
</div>
<div id="program-download-and-sample-data" class="section level3">
<h3>Program download (and sample data)</h3>
<p><a href="public-goods/serial-dictator-program/serial-dictator-program.jl" target="_blank">Download
the program here</a> and use this
<a href="public-goods/serial-dictator-program/example-preferences.csv" target="_blank">example
data</a> to see how it works!</p>
<p>Note that to use it, you should upload a CSV with column names that
are the names of individuals and their preferences descending in
favorability. For example, the data for a 4-person, 3-object setting
should look like the table below:</p>
<div style="display: flex; justify-content: center;" width="100%">
<table>
<thead>
<tr>
<th>
Adam
</th>
<th>
Bob
</th>
<th>
Candace
</th>
<th>
David
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Adam’s first choice
</td>
<td>
Bob’s first choice
</td>
<td>
Candace’s first choice
</td>
<td>
David’s first choice
</td>
</tr>
<tr>
<td>
Adam’s second choice
</td>
<td>
Bob’s second choice
</td>
<td>
Candace’s second choice
</td>
<td>
David’s second choice
</td>
</tr>
<tr>
<td>
Adam’s third choice
</td>
<td>
Bob’s third choice
</td>
<td>
Candace’s third choice
</td>
<td>
David’s third choice
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
